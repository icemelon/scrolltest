# Scroll Test

A test script to test scroll proof verification

## Running test

```
gh repo clone makoto/scrolltest
cd scrolltest
export L1_PROVIDER_URL="Add Sepolia JSON RPC endpoint"
yarn
yarn test
```

## Output

```
tmp/scrolltest - (master) > yarn test
yarn run v1.22.19
warning package.json: No license field
warning ../../package.json: No license field
warning ../../../../package.json: No license field
$ ts-node src/index.ts
2 {
  account: '0x94fbce7ca1a0152cfc99f90f4421d31cf356c896',
  storage: '0x0000000000000000000000000000000000000000000000000000000000000000'
}
3 {
  "address": "0x94fbce7ca1a0152cfc99f90f4421d31cf356c896",
  "accountProof": [
    "0x090218174890a11422ef6695982a582ba4d236a0b725672e9433e567af12eb77291696fe8f6a1a379c8638b3c3f5886d379b22a57129c9cd8f2df190e9aced3342",
    "0x090203669755a8ea8d692d0965f8273a3a81d79bd19d74fe0739f8eebfb8077c9b24470cbc2a935761721dfb49c6887434d4be9b866eb92755187b1a0d191a2d09",
    "0x0924e20277838f7db84a2bc3ab334e369eb6f33d28210316145b2f29e852e3c66c1f1f6c9125d9065b55d7c4c83a1917ae373528c8e3c9a83c185f4de9c4fc3092",
    "0x090bde6b1cd3becfabc668b8b4388429ab6a218ef1c6cb3ca0b0a7404ea9f81a992d1b41a520e03a6874f779032b9236181e3c3087cbe78e2bd56e6ae9404b734b",
    "0x091ad889419d67d291ea8b02c546985eef2960a1b1d77873af0312687408af1d4805d0df219702262c717c2f5f6a596fb4eee26c25763764a9d101fd8b0994501d",
    "0x091e15eb8f54d03567d1f4d2b7947bcffc6acd32f88c5907e237f72ab45226f1a71950403798b469b1180fb218aa35b7eeef7998b0b63fabf4fc08d8dcecbdda89",
    "0x0918ae1136fdee9fcbe2a2997cb3f6156fdf6d3ceceb726d0d1d0fa192d0fc30651a03d71dbcefc29439e4158323410ede4bae3b64e28e19247c284936ec563e2f",
    "0x09247281194a39f1694ac5487b70f8f5a38951202785e9b44d8653d207707e977a27068b023b26f669e76bfc34732b7f0928950a0961e40eb06d2aecc3b5c44c95",
    "0x0906759328c5e142faf430c877793b9e5a47bb8580aa7981cb348866aee415522b0d4a8207adb4126943f71d3b497c2b2ce190b0146e10e7bac68d3bc6f07b28a2",
    "0x091f6b2452c3607dc7b81568befe47c43e14ac510e4f1173cfc37a5f92f192f99c16b000ee777fe56055f536a276794f291c23ef8e72e5b3b3f5683eba2f24096a",
    "0x0919a452d198a7cf01577c3fa60773975d556ce169cc4ab5032d8c8500b7aec30e1213ea1aaba525328e907c3648ea5ae0aef21ced771aa7171ca243d65740274d",
    "0x0911f127db5b420f13d4af7d363582bd5f8669cc8694b57b2ae02caca700aaf53228a268436e89187d70b7e52ba71eceb15a5541ac0ed00d041199aa30fa985ff4",
    "0x09002b2e069511ca13effac923e1d6d0ca8438008a9f9c313021172f18bd8c5d842738e7a9959589a86424d25a74767da156b87ec408999ca5a64342e7f8328596",
    "0x091310d056c72fef2c670a892e937a0671cb31b14fc38fb8935cd8bcafec482aa709e82f3dfe078c353ab1d2315e155d8d0989e5b7309caeee431781e5295e064c",
    "0x091e59496c06cb2cbd5a397a8361472a7ee79df018e06eff3f3db265552bc0aa8c20d5bb96e49949e6bb4675642d9aeaf4a1d310b04c18d3e472b921a66f822334",
    "0x09106a1b2285a2e6873a1ce5460d933e945f270e467d7c9432fff7f299116d8b1e022a306f5c103de991c9d18722f87b20faec1868802941e9428e5565a71cf5f7",
    "0x0928d416a671e12efff1045f7f1f30c57b74650b65578872e42e43892ae2c0d3780e18571870ba0a7b46755282519e59b08a2aeabb3382b9361c8a9aefebfa8237",
    "0x0920395e1b736ab51ea38e9e5ad23fe87f87b1600f8caea1f1773fb0d165343e5116a94ade4d8ef3282c212fc04c0717494c861af75d1c8f4f0f0fe543632876df",
    "0x0915305af7897da344ed2f36c553474c6ac774f0c7e23e8ef1327efa3e81a1d1ed241e21a0379436e5696000745d5b1d65079f638790573c8cdc9a3e6aee369bba",
    "0x081aecf7306fa8a64e92703c1899ae54aba9e73e010f1dccfe8fb72c7a8bc6e7ee245d9b32b7d8c6d9b01015d65b8985b53bfd3086653d56f0e918442a3d72195c",
    "0x09166f9c6bbb0712f48b97e72706182838ff58b370b4f5577abc63e9ac661c21bd11e49912865542c41e2cc7409d9716c16854cb4d74462167bacd92f5d10b1c6e",
    "0x061258ccbcae0c2cfde2863d54d904a3c166af075bcbb8383e7bafce8f352dc51e2ea97a4adf035655950e487c6d875c153957fd11a9d022db262c164ba7bc06c7",
    "0x041d83d7ed0ab2cb1a90a631a73432c9a0ca684964d6fe20ed7eebbb69ecf0379f05080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000002d693681687fd7f9e4dee99b81e28ea9f76bc4a46cc2bd941f04d793f134bfc44065cdb3629aeff919178252ecc2e69fe38398f2c61163ec99e04bd79f99274c1945d7e22e6b7a012ed1f5444bd19b47be70c3060e106fccbb6332c70faa059b2094fbce7ca1a0152cfc99f90f4421d31cf356c896000000000000000000000000",
    "0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449"
  ],
  "balance": "0x0",
  "poseidonCodeHash": "0x1945d7e22e6b7a012ed1f5444bd19b47be70c3060e106fccbb6332c70faa059b",
  "keccakCodeHash": "0x4065cdb3629aeff919178252ecc2e69fe38398f2c61163ec99e04bd79f99274c",
  "codeSize": "0x143",
  "nonce": "0x1",
  "storageHash": "0x2d693681687fd7f9e4dee99b81e28ea9f76bc4a46cc2bd941f04d793f134bfc4",
  "storageProof": [
    {
      "key": "0x0000000000000000000000000000000000000000000000000000000000000000",
      "value": "0x3",
      "proof": [
        "0x0822bcd75fb5e1904e9670426e31b1be542ca0328f4c572280e7186c74b4a96d3f0000000000000000000000000000000000000000000000000000000000000000",
        "0x060bc0881e0868b6e9c3c4f28c70932814e8f293460d797fcfe7f5d73080fd63410cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a1",
        "0x041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e94428422010100000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000000",
        "0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449"
      ]
    }
  ]
}
4 {
  accountProof: [
    '0x090218174890a11422ef6695982a582ba4d236a0b725672e9433e567af12eb77291696fe8f6a1a379c8638b3c3f5886d379b22a57129c9cd8f2df190e9aced3342',
    '0x090203669755a8ea8d692d0965f8273a3a81d79bd19d74fe0739f8eebfb8077c9b24470cbc2a935761721dfb49c6887434d4be9b866eb92755187b1a0d191a2d09',
    '0x0924e20277838f7db84a2bc3ab334e369eb6f33d28210316145b2f29e852e3c66c1f1f6c9125d9065b55d7c4c83a1917ae373528c8e3c9a83c185f4de9c4fc3092',
    '0x090bde6b1cd3becfabc668b8b4388429ab6a218ef1c6cb3ca0b0a7404ea9f81a992d1b41a520e03a6874f779032b9236181e3c3087cbe78e2bd56e6ae9404b734b',
    '0x091ad889419d67d291ea8b02c546985eef2960a1b1d77873af0312687408af1d4805d0df219702262c717c2f5f6a596fb4eee26c25763764a9d101fd8b0994501d',
    '0x091e15eb8f54d03567d1f4d2b7947bcffc6acd32f88c5907e237f72ab45226f1a71950403798b469b1180fb218aa35b7eeef7998b0b63fabf4fc08d8dcecbdda89',
    '0x0918ae1136fdee9fcbe2a2997cb3f6156fdf6d3ceceb726d0d1d0fa192d0fc30651a03d71dbcefc29439e4158323410ede4bae3b64e28e19247c284936ec563e2f',
    '0x09247281194a39f1694ac5487b70f8f5a38951202785e9b44d8653d207707e977a27068b023b26f669e76bfc34732b7f0928950a0961e40eb06d2aecc3b5c44c95',
    '0x0906759328c5e142faf430c877793b9e5a47bb8580aa7981cb348866aee415522b0d4a8207adb4126943f71d3b497c2b2ce190b0146e10e7bac68d3bc6f07b28a2',
    '0x091f6b2452c3607dc7b81568befe47c43e14ac510e4f1173cfc37a5f92f192f99c16b000ee777fe56055f536a276794f291c23ef8e72e5b3b3f5683eba2f24096a',
    '0x0919a452d198a7cf01577c3fa60773975d556ce169cc4ab5032d8c8500b7aec30e1213ea1aaba525328e907c3648ea5ae0aef21ced771aa7171ca243d65740274d',
    '0x0911f127db5b420f13d4af7d363582bd5f8669cc8694b57b2ae02caca700aaf53228a268436e89187d70b7e52ba71eceb15a5541ac0ed00d041199aa30fa985ff4',
    '0x09002b2e069511ca13effac923e1d6d0ca8438008a9f9c313021172f18bd8c5d842738e7a9959589a86424d25a74767da156b87ec408999ca5a64342e7f8328596',
    '0x091310d056c72fef2c670a892e937a0671cb31b14fc38fb8935cd8bcafec482aa709e82f3dfe078c353ab1d2315e155d8d0989e5b7309caeee431781e5295e064c',
    '0x091e59496c06cb2cbd5a397a8361472a7ee79df018e06eff3f3db265552bc0aa8c20d5bb96e49949e6bb4675642d9aeaf4a1d310b04c18d3e472b921a66f822334',
    '0x09106a1b2285a2e6873a1ce5460d933e945f270e467d7c9432fff7f299116d8b1e022a306f5c103de991c9d18722f87b20faec1868802941e9428e5565a71cf5f7',
    '0x0928d416a671e12efff1045f7f1f30c57b74650b65578872e42e43892ae2c0d3780e18571870ba0a7b46755282519e59b08a2aeabb3382b9361c8a9aefebfa8237',
    '0x0920395e1b736ab51ea38e9e5ad23fe87f87b1600f8caea1f1773fb0d165343e5116a94ade4d8ef3282c212fc04c0717494c861af75d1c8f4f0f0fe543632876df',
    '0x0915305af7897da344ed2f36c553474c6ac774f0c7e23e8ef1327efa3e81a1d1ed241e21a0379436e5696000745d5b1d65079f638790573c8cdc9a3e6aee369bba',
    '0x081aecf7306fa8a64e92703c1899ae54aba9e73e010f1dccfe8fb72c7a8bc6e7ee245d9b32b7d8c6d9b01015d65b8985b53bfd3086653d56f0e918442a3d72195c',
    '0x09166f9c6bbb0712f48b97e72706182838ff58b370b4f5577abc63e9ac661c21bd11e49912865542c41e2cc7409d9716c16854cb4d74462167bacd92f5d10b1c6e',
    '0x061258ccbcae0c2cfde2863d54d904a3c166af075bcbb8383e7bafce8f352dc51e2ea97a4adf035655950e487c6d875c153957fd11a9d022db262c164ba7bc06c7',
    '0x041d83d7ed0ab2cb1a90a631a73432c9a0ca684964d6fe20ed7eebbb69ecf0379f05080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000002d693681687fd7f9e4dee99b81e28ea9f76bc4a46cc2bd941f04d793f134bfc44065cdb3629aeff919178252ecc2e69fe38398f2c61163ec99e04bd79f99274c1945d7e22e6b7a012ed1f5444bd19b47be70c3060e106fccbb6332c70faa059b2094fbce7ca1a0152cfc99f90f4421d31cf356c896000000000000000000000000',
    '0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449'
  ]
}
5 {
  storageProof: [
    '0x0822bcd75fb5e1904e9670426e31b1be542ca0328f4c572280e7186c74b4a96d3f0000000000000000000000000000000000000000000000000000000000000000',
    '0x060bc0881e0868b6e9c3c4f28c70932814e8f293460d797fcfe7f5d73080fd63410cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a1',
    '0x041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e94428422010100000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000000',
    '0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449'
  ]
}
6 {
  compressedProof: Uint8Array(1984) [
     24,   9,   2,  24,  23,  72, 144, 161,  20,  34, 239, 102,
    149, 152,  42,  88,  43, 164, 210,  54, 160, 183,  37, 103,
     46, 148,  51, 229, 103, 175,  18, 235, 119,  41,  22, 150,
    254, 143, 106,  26,  55, 156, 134,  56, 179, 195, 245, 136,
    109,  55, 155,  34, 165, 113,  41, 201, 205, 143,  45, 241,
    144, 233, 172, 237,  51,  66,   9,   2,   3, 102, 151,  85,
    168, 234, 141, 105,  45,   9, 101, 248,  39,  58,  58, 129,
    215, 155, 209, 157, 116, 254,   7,  57, 248, 238, 191, 184,
      7, 124, 155,  36,
    ... 1884 more items
  ]
}
61 65962
7 [
  '0x2ed35e8261b3935a5f99fee3392ddd235f5f7a9c36529437122b2d235b107749',
  '0x0000000000000000000000000000000000000000000000000000000000000003',
  stateRoot: '0x2ed35e8261b3935a5f99fee3392ddd235f5f7a9c36529437122b2d235b107749',
  storageValue: '0x0000000000000000000000000000000000000000000000000000000000000003'
]
Error: call revert exception; VM Exception while processing transaction: reverted with reason string "Invalid inclusion proof" [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (method="verifyStateCommitment(uint256,address,bytes32,bytes)", data="0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000017496e76616c696420696e636c7573696f6e2070726f6f66000000000000000000", errorArgs=["Invalid inclusion proof"], errorName="Error", errorSignature="Error(string)", reason="Invalid inclusion proof", code=CALL_EXCEPTION, version=abi/5.7.0)
    at Logger.makeError (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/logger/src.ts/index.ts:269:28)
    at Logger.throwError (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/logger/src.ts/index.ts:281:20)
    at Interface.decodeFunctionResult (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/abi/src.ts/interface.ts:427:23)
    at Object.<anonymous> (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/src.ts/index.ts:400:44)
    at step (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:48:23)
    at Object.next (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:29:53)
    at fulfilled (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:20:58)
    at processTicksAndRejections (node:internal/process/task_queues:95:5) {
  reason: 'Invalid inclusion proof',
  code: 'CALL_EXCEPTION',
  method: 'verifyStateCommitment(uint256,address,bytes32,bytes)',
  data: '0x08c379a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000017496e76616c696420696e636c7573696f6e2070726f6f66000000000000000000',
  errorArgs: [ 'Invalid inclusion proof' ],
  errorName: 'Error',
  errorSignature: 'Error(string)',
  address: '0x64cb3A0Dcf43Ae0EE35C1C15edDF5F46D48Fa570',
  args: [
    65962,
    '0x94fbce7ca1a0152cfc99f90f4421d31cf356c896',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    Uint8Array(1984) [
       24,   9,   2,  24,  23,  72, 144, 161,  20,  34, 239, 102,
      149, 152,  42,  88,  43, 164, 210,  54, 160, 183,  37, 103,
       46, 148,  51, 229, 103, 175,  18, 235, 119,  41,  22, 150,
      254, 143, 106,  26,  55, 156, 134,  56, 179, 195, 245, 136,
      109,  55, 155,  34, 165, 113,  41, 201, 205, 143,  45, 241,
      144, 233, 172, 237,  51,  66,   9,   2,   3, 102, 151,  85,
      168, 234, 141, 105,  45,   9, 101, 248,  39,  58,  58, 129,
      215, 155, 209, 157, 116, 254,   7,  57, 248, 238, 191, 184,
        7, 124, 155,  36,
      ... 1884 more items
    ]
  ],
  transaction: {
    data: '0x8f906e1100000000000000000000000000000000000000000000000000000000000101aa00000000000000000000000094fbce7ca1a0152cfc99f90f4421d31cf356c8960000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000007c018090218174890a11422ef6695982a582ba4d236a0b725672e9433e567af12eb77291696fe8f6a1a379c8638b3c3f5886d379b22a57129c9cd8f2df190e9aced3342090203669755a8ea8d692d0965f8273a3a81d79bd19d74fe0739f8eebfb8077c9b24470cbc2a935761721dfb49c6887434d4be9b866eb92755187b1a0d191a2d090924e20277838f7db84a2bc3ab334e369eb6f33d28210316145b2f29e852e3c66c1f1f6c9125d9065b55d7c4c83a1917ae373528c8e3c9a83c185f4de9c4fc3092090bde6b1cd3becfabc668b8b4388429ab6a218ef1c6cb3ca0b0a7404ea9f81a992d1b41a520e03a6874f779032b9236181e3c3087cbe78e2bd56e6ae9404b734b091ad889419d67d291ea8b02c546985eef2960a1b1d77873af0312687408af1d4805d0df219702262c717c2f5f6a596fb4eee26c25763764a9d101fd8b0994501d091e15eb8f54d03567d1f4d2b7947bcffc6acd32f88c5907e237f72ab45226f1a71950403798b469b1180fb218aa35b7eeef7998b0b63fabf4fc08d8dcecbdda890918ae1136fdee9fcbe2a2997cb3f6156fdf6d3ceceb726d0d1d0fa192d0fc30651a03d71dbcefc29439e4158323410ede4bae3b64e28e19247c284936ec563e2f09247281194a39f1694ac5487b70f8f5a38951202785e9b44d8653d207707e977a27068b023b26f669e76bfc34732b7f0928950a0961e40eb06d2aecc3b5c44c950906759328c5e142faf430c877793b9e5a47bb8580aa7981cb348866aee415522b0d4a8207adb4126943f71d3b497c2b2ce190b0146e10e7bac68d3bc6f07b28a2091f6b2452c3607dc7b81568befe47c43e14ac510e4f1173cfc37a5f92f192f99c16b000ee777fe56055f536a276794f291c23ef8e72e5b3b3f5683eba2f24096a0919a452d198a7cf01577c3fa60773975d556ce169cc4ab5032d8c8500b7aec30e1213ea1aaba525328e907c3648ea5ae0aef21ced771aa7171ca243d65740274d0911f127db5b420f13d4af7d363582bd5f8669cc8694b57b2ae02caca700aaf53228a268436e89187d70b7e52ba71eceb15a5541ac0ed00d041199aa30fa985ff409002b2e069511ca13effac923e1d6d0ca8438008a9f9c313021172f18bd8c5d842738e7a9959589a86424d25a74767da156b87ec408999ca5a64342e7f8328596091310d056c72fef2c670a892e937a0671cb31b14fc38fb8935cd8bcafec482aa709e82f3dfe078c353ab1d2315e155d8d0989e5b7309caeee431781e5295e064c091e59496c06cb2cbd5a397a8361472a7ee79df018e06eff3f3db265552bc0aa8c20d5bb96e49949e6bb4675642d9aeaf4a1d310b04c18d3e472b921a66f82233409106a1b2285a2e6873a1ce5460d933e945f270e467d7c9432fff7f299116d8b1e022a306f5c103de991c9d18722f87b20faec1868802941e9428e5565a71cf5f70928d416a671e12efff1045f7f1f30c57b74650b65578872e42e43892ae2c0d3780e18571870ba0a7b46755282519e59b08a2aeabb3382b9361c8a9aefebfa82370920395e1b736ab51ea38e9e5ad23fe87f87b1600f8caea1f1773fb0d165343e5116a94ade4d8ef3282c212fc04c0717494c861af75d1c8f4f0f0fe543632876df0915305af7897da344ed2f36c553474c6ac774f0c7e23e8ef1327efa3e81a1d1ed241e21a0379436e5696000745d5b1d65079f638790573c8cdc9a3e6aee369bba081aecf7306fa8a64e92703c1899ae54aba9e73e010f1dccfe8fb72c7a8bc6e7ee245d9b32b7d8c6d9b01015d65b8985b53bfd3086653d56f0e918442a3d72195c09166f9c6bbb0712f48b97e72706182838ff58b370b4f5577abc63e9ac661c21bd11e49912865542c41e2cc7409d9716c16854cb4d74462167bacd92f5d10b1c6e061258ccbcae0c2cfde2863d54d904a3c166af075bcbb8383e7bafce8f352dc51e2ea97a4adf035655950e487c6d875c153957fd11a9d022db262c164ba7bc06c7041d83d7ed0ab2cb1a90a631a73432c9a0ca684964d6fe20ed7eebbb69ecf0379f05080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000002d693681687fd7f9e4dee99b81e28ea9f76bc4a46cc2bd941f04d793f134bfc44065cdb3629aeff919178252ecc2e69fe38398f2c61163ec99e04bd79f99274c1945d7e22e6b7a012ed1f5444bd19b47be70c3060e106fccbb6332c70faa059b2094fbce7ca1a0152cfc99f90f4421d31cf356c8960000000000000000000000005448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449040822bcd75fb5e1904e9670426e31b1be542ca0328f4c572280e7186c74b4a96d3f0000000000000000000000000000000000000000000000000000000000000000060bc0881e0868b6e9c3c4f28c70932814e8f293460d797fcfe7f5d73080fd63410cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a1041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e944284220101000000000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000005448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449',
    to: '0x64cb3A0Dcf43Ae0EE35C1C15edDF5F46D48Fa570'
  }
}
error Command failed with exit code 1.
```