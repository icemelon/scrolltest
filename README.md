# Scroll Test

A test script to test scroll proof verification

## Running test

```
gh repo clone makoto/scrolltest
cd scrolltest
export L1_PROVIDER_URL="Add Sepolia JSON RPC endpoint"
yarn
yarn test
```

## Output

```
tmp/scrolltest - (master) > yarn test
yarn run v1.22.19
warning package.json: No license field
warning ../../package.json: No license field
warning ../../../../package.json: No license field
$ ts-node src/index.ts
2 {
  account: '0x5f5e99139a17c56eadc3b1d01535224d003b7e5b',
  storage: '0x0000000000000000000000000000000000000000000000000000000000000000'
}
3 {
  "address": "0x5f5e99139a17c56eadc3b1d01535224d003b7e5b",
  "accountProof": [
    "0x092b001b5e92d1f69e8d37eba0a4468076e7309893e38dc93c273c337e5d3bee1b159c17bdc3e84de79bb9623bfd61e9e208678b1ffaa6260d7a5818fe471d0520",
    "0x09044425c257b6849196a8c53935e3d43276d480098de03253262486e93c2d73ee0ef1de10390e4864a6766f2eef2512cf5605fecc5a5778e571bbdbdfc2ef2ca9",
    "0x0919d1d61f212c6900ae30e8d8fef25500ec051ca78e26414be81c94e20c92cbb00bbd503ca3d5a1fce0da1a6bb4f83f7ea7341a06403007152c7982854db76e5d",
    "0x092186919c8369174ad0445a16f4ef00088d5f7a4ba3d042ab302271d2c69fcaef05d1f514cbe36823715b0cdbb80a0201a2bc29833bb279678bee8d4e089870b3",
    "0x09188ad81f9181a91cd62a5e51deef0c91a56228364185ab51e948a3eeb48d95b0063689b921ee16c11cef41f2a5f266cf0acaff87ba37c2c109a1d1e6e4f81dc8",
    "0x0910920cd7b8f666017fb6ce5d0f0d171d6c4b1d15b12d4befdc9e6cf28c19add9099b964e17645db014c76585b4c638bec9bb323e92a2f65011a2948b897b61ce",
    "0x090cdab7e2c53237975822056e67bed14aa89573459aeff4e2235ee45937b31fd51a74f2d88ad4ddcb1bcbe2db89a67b2502bb24118f1d9b26f3654b2e3ae399b7",
    "0x09290438fecddb47e4339d8047ce07cdbdff66295e50f2ec2ed020327a2a9a459d01cffb1c6b5c4c20fc8d48308e4f6a427f79329048d94156dc6bbb27b3665ee2",
    "0x09157db11fb986975f85a9e22655f4f9d4d94a3024cd1bd70f16da36d93ca7521104edfc7d038acf2371d9e1bbd6367affba929d4584d9c4bcc2ad50d279326cdc",
    "0x0911f70543e4eb57a3ead943e44806cbc4dafdcef6af45e80ee9c749429b50573f07f58435d433c5909c1b734644160db86e59b229bf282608f5903c4a9410c237",
    "0x091f1aefb83d6c83c5780498b77f15175cdcb9d21980d63f3730fa72e6864e00ae123893cf7f450afbc5db8e43cdae5efeecfa8dfadb8d2a6c7f191ee8900688dc",
    "0x090682371e6ba1fc158e270276809c1edad0232a5cc0492dbee8e77d4545843c761168338c91abf6f351542752cc4996ab0f5b160956d7dec6f47f8386501510e5",
    "0x090591e65945dd2d4994e86dd9b7bba364849bbed709a42f68e28ef1e9b86e8639169da5e0a4deccd9da615b0521c92c9531385d50c8df23dddcf86fe74bc18426",
    "0x092c850c7a6cf7b1458103d08ad8b0bc16d45adcf9c18808d09e2c6ac3d2eff03826fd17db532bac01f6d74244ec19224fc65d78dcd876ddac787695240bbddc8e",
    "0x09184242467934bf44ce5ee06db3fba86a79da6ce8046612faa8349402deec43c80a0ad150ca36ab5554ff99003af796d48959f342a05542d3b24d4bc3709ff14d",
    "0x0915ae9baf469ad336da960f4b9549a24bbdca3930e44829fae425c6289a2814830432e85b89f9fc70a7087ad56264f48c1b9c2e0cd3c0eab67d9d47080125f5d1",
    "0x092071f6cc893dd197b4faf1c3caaeca8406c3bc8651b7f4dae664634ca9d099d60d01ff24b6fa8dd39204794ea4a5add074452bb125281cbb299efae26bf9ae5f",
    "0x091d7c1d7ae3d4220159d835eac1b919480df6da2a9f3527f485c2bba6b55b9d4928171ba10f1fdbc2a1ec4b525e25f0cd493eca84c2d6566ae1fd73c2566be473",
    "0x092aaed28e0c1bce50ef7d026eb6ed2da08f7c80fd759a07d3d3ef276fe0153a0711017e16cdf773ec997ed9d8f5480d1f240192dc67164e4e71ac5b026f4a3cf0",
    "0x08037d567db28782df33142d584e8b19164d4f0775d50263042a70a70d0cdd184b1460e75eb90aba05652c1f14d25e7b7d5c90a66819b5a8c79dcfbdad5b041dad",
    "0x0620c7efefe4c71208c742955250923544cf6eeaf22a78a92c413e35072576fd7f25af7856bd2584ea92508c8b885616cdee40f02c7335d8e16067f40e7f16a99c",
    "0x0425d4bb4c05d0e6f9a8af66df22d0b8e3cf38717c1b59137e0c9d7f911ad4046705080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000000cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a14a48573a9e2ab3960c69d5bb13c5fc3f7849d8be8f7a3a5eac0e7fe1dfc7e9222074d890456f7b46ad0186f4636992e61a31fd25118015b5a827b275ee6f84ca205f5e99139a17c56eadc3b1d01535224d003b7e5b000000000000000000000000",
    "0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449"
  ],
  "balance": "0x0",
  "poseidonCodeHash": "0x2074d890456f7b46ad0186f4636992e61a31fd25118015b5a827b275ee6f84ca",
  "keccakCodeHash": "0x4a48573a9e2ab3960c69d5bb13c5fc3f7849d8be8f7a3a5eac0e7fe1dfc7e922",
  "codeSize": "0x143",
  "nonce": "0x1",
  "storageHash": "0x0cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a1",
  "storageProof": [
    {
      "key": "0x0000000000000000000000000000000000000000000000000000000000000000",
      "value": "0x3",
      "proof": [
        "0x041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e94428422010100000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000000",
        "0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449"
      ]
    }
  ]
}
4 {
  accountProof: [
    '0x092b001b5e92d1f69e8d37eba0a4468076e7309893e38dc93c273c337e5d3bee1b159c17bdc3e84de79bb9623bfd61e9e208678b1ffaa6260d7a5818fe471d0520',
    '0x09044425c257b6849196a8c53935e3d43276d480098de03253262486e93c2d73ee0ef1de10390e4864a6766f2eef2512cf5605fecc5a5778e571bbdbdfc2ef2ca9',
    '0x0919d1d61f212c6900ae30e8d8fef25500ec051ca78e26414be81c94e20c92cbb00bbd503ca3d5a1fce0da1a6bb4f83f7ea7341a06403007152c7982854db76e5d',
    '0x092186919c8369174ad0445a16f4ef00088d5f7a4ba3d042ab302271d2c69fcaef05d1f514cbe36823715b0cdbb80a0201a2bc29833bb279678bee8d4e089870b3',
    '0x09188ad81f9181a91cd62a5e51deef0c91a56228364185ab51e948a3eeb48d95b0063689b921ee16c11cef41f2a5f266cf0acaff87ba37c2c109a1d1e6e4f81dc8',
    '0x0910920cd7b8f666017fb6ce5d0f0d171d6c4b1d15b12d4befdc9e6cf28c19add9099b964e17645db014c76585b4c638bec9bb323e92a2f65011a2948b897b61ce',
    '0x090cdab7e2c53237975822056e67bed14aa89573459aeff4e2235ee45937b31fd51a74f2d88ad4ddcb1bcbe2db89a67b2502bb24118f1d9b26f3654b2e3ae399b7',
    '0x09290438fecddb47e4339d8047ce07cdbdff66295e50f2ec2ed020327a2a9a459d01cffb1c6b5c4c20fc8d48308e4f6a427f79329048d94156dc6bbb27b3665ee2',
    '0x09157db11fb986975f85a9e22655f4f9d4d94a3024cd1bd70f16da36d93ca7521104edfc7d038acf2371d9e1bbd6367affba929d4584d9c4bcc2ad50d279326cdc',
    '0x0911f70543e4eb57a3ead943e44806cbc4dafdcef6af45e80ee9c749429b50573f07f58435d433c5909c1b734644160db86e59b229bf282608f5903c4a9410c237',
    '0x091f1aefb83d6c83c5780498b77f15175cdcb9d21980d63f3730fa72e6864e00ae123893cf7f450afbc5db8e43cdae5efeecfa8dfadb8d2a6c7f191ee8900688dc',
    '0x090682371e6ba1fc158e270276809c1edad0232a5cc0492dbee8e77d4545843c761168338c91abf6f351542752cc4996ab0f5b160956d7dec6f47f8386501510e5',
    '0x090591e65945dd2d4994e86dd9b7bba364849bbed709a42f68e28ef1e9b86e8639169da5e0a4deccd9da615b0521c92c9531385d50c8df23dddcf86fe74bc18426',
    '0x092c850c7a6cf7b1458103d08ad8b0bc16d45adcf9c18808d09e2c6ac3d2eff03826fd17db532bac01f6d74244ec19224fc65d78dcd876ddac787695240bbddc8e',
    '0x09184242467934bf44ce5ee06db3fba86a79da6ce8046612faa8349402deec43c80a0ad150ca36ab5554ff99003af796d48959f342a05542d3b24d4bc3709ff14d',
    '0x0915ae9baf469ad336da960f4b9549a24bbdca3930e44829fae425c6289a2814830432e85b89f9fc70a7087ad56264f48c1b9c2e0cd3c0eab67d9d47080125f5d1',
    '0x092071f6cc893dd197b4faf1c3caaeca8406c3bc8651b7f4dae664634ca9d099d60d01ff24b6fa8dd39204794ea4a5add074452bb125281cbb299efae26bf9ae5f',
    '0x091d7c1d7ae3d4220159d835eac1b919480df6da2a9f3527f485c2bba6b55b9d4928171ba10f1fdbc2a1ec4b525e25f0cd493eca84c2d6566ae1fd73c2566be473',
    '0x092aaed28e0c1bce50ef7d026eb6ed2da08f7c80fd759a07d3d3ef276fe0153a0711017e16cdf773ec997ed9d8f5480d1f240192dc67164e4e71ac5b026f4a3cf0',
    '0x08037d567db28782df33142d584e8b19164d4f0775d50263042a70a70d0cdd184b1460e75eb90aba05652c1f14d25e7b7d5c90a66819b5a8c79dcfbdad5b041dad',
    '0x0620c7efefe4c71208c742955250923544cf6eeaf22a78a92c413e35072576fd7f25af7856bd2584ea92508c8b885616cdee40f02c7335d8e16067f40e7f16a99c',
    '0x0425d4bb4c05d0e6f9a8af66df22d0b8e3cf38717c1b59137e0c9d7f911ad4046705080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000000cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a14a48573a9e2ab3960c69d5bb13c5fc3f7849d8be8f7a3a5eac0e7fe1dfc7e9222074d890456f7b46ad0186f4636992e61a31fd25118015b5a827b275ee6f84ca205f5e99139a17c56eadc3b1d01535224d003b7e5b000000000000000000000000',
    '0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449'
  ]
}
5 {
  storageProof: [
    '0x041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e94428422010100000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000000',
    '0x5448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449'
  ]
}
6 {
  compressedProof: Uint8Array(1789) [
     23,   9,  43,   0,  27,  94, 146, 209, 246, 158, 141,  55,
    235, 160, 164,  70, 128, 118, 231,  48, 152, 147, 227, 141,
    201,  60,  39,  60,  51, 126,  93,  59, 238,  27,  21, 156,
     23, 189, 195, 232,  77, 231, 155, 185,  98,  59, 253,  97,
    233, 226,   8, 103, 139,  31, 250, 166,  38,  13, 122,  88,
     24, 254,  71,  29,   5,  32,   9,   4,  68,  37, 194,  87,
    182, 132, 145, 150, 168, 197,  57,  53, 227, 212,  50, 118,
    212, 128,   9, 141, 224,  50,  83,  38,  36, 134, 233,  60,
     45, 115, 238,  14,
    ... 1689 more items
  ]
}
Error: call revert exception; VM Exception while processing transaction: reverted with reason string "StorageRootMismatch" [ See: https://links.ethers.org/v5-errors-CALL_EXCEPTION ] (method="verifyZkTrieProof(address,bytes32,bytes)", data="0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001353746f72616765526f6f744d69736d6174636800000000000000000000000000", errorArgs=["StorageRootMismatch"], errorName="Error", errorSignature="Error(string)", reason="StorageRootMismatch", code=CALL_EXCEPTION, version=abi/5.7.0)
    at Logger.makeError (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/logger/src.ts/index.ts:269:28)
    at Logger.throwError (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/logger/src.ts/index.ts:281:20)
    at Interface.decodeFunctionResult (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/abi/src.ts/interface.ts:427:23)
    at Object.<anonymous> (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/src.ts/index.ts:400:44)
    at step (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:48:23)
    at Object.next (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:29:53)
    at fulfilled (/Users/makotoinoue/work/ens/tmp/scrolltest/node_modules/@ethersproject/contracts/lib/index.js:20:58)
    at processTicksAndRejections (node:internal/process/task_queues:95:5) {
  reason: 'StorageRootMismatch',
  code: 'CALL_EXCEPTION',
  method: 'verifyZkTrieProof(address,bytes32,bytes)',
  data: '0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001353746f72616765526f6f744d69736d6174636800000000000000000000000000',
  errorArgs: [ 'StorageRootMismatch' ],
  errorName: 'Error',
  errorSignature: 'Error(string)',
  address: '0x64cb3A0Dcf43Ae0EE35C1C15edDF5F46D48Fa570',
  args: [
    '0x5f5e99139a17c56eadc3b1d01535224d003b7e5b',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    Uint8Array(1789) [
       23,   9,  43,   0,  27,  94, 146, 209, 246, 158, 141,  55,
      235, 160, 164,  70, 128, 118, 231,  48, 152, 147, 227, 141,
      201,  60,  39,  60,  51, 126,  93,  59, 238,  27,  21, 156,
       23, 189, 195, 232,  77, 231, 155, 185,  98,  59, 253,  97,
      233, 226,   8, 103, 139,  31, 250, 166,  38,  13, 122,  88,
       24, 254,  71,  29,   5,  32,   9,   4,  68,  37, 194,  87,
      182, 132, 145, 150, 168, 197,  57,  53, 227, 212,  50, 118,
      212, 128,   9, 141, 224,  50,  83,  38,  36, 134, 233,  60,
       45, 115, 238,  14,
      ... 1689 more items
    ]
  ],
  transaction: {
    data: '0x61016dc40000000000000000000000005f5e99139a17c56eadc3b1d01535224d003b7e5b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000006fd17092b001b5e92d1f69e8d37eba0a4468076e7309893e38dc93c273c337e5d3bee1b159c17bdc3e84de79bb9623bfd61e9e208678b1ffaa6260d7a5818fe471d052009044425c257b6849196a8c53935e3d43276d480098de03253262486e93c2d73ee0ef1de10390e4864a6766f2eef2512cf5605fecc5a5778e571bbdbdfc2ef2ca90919d1d61f212c6900ae30e8d8fef25500ec051ca78e26414be81c94e20c92cbb00bbd503ca3d5a1fce0da1a6bb4f83f7ea7341a06403007152c7982854db76e5d092186919c8369174ad0445a16f4ef00088d5f7a4ba3d042ab302271d2c69fcaef05d1f514cbe36823715b0cdbb80a0201a2bc29833bb279678bee8d4e089870b309188ad81f9181a91cd62a5e51deef0c91a56228364185ab51e948a3eeb48d95b0063689b921ee16c11cef41f2a5f266cf0acaff87ba37c2c109a1d1e6e4f81dc80910920cd7b8f666017fb6ce5d0f0d171d6c4b1d15b12d4befdc9e6cf28c19add9099b964e17645db014c76585b4c638bec9bb323e92a2f65011a2948b897b61ce090cdab7e2c53237975822056e67bed14aa89573459aeff4e2235ee45937b31fd51a74f2d88ad4ddcb1bcbe2db89a67b2502bb24118f1d9b26f3654b2e3ae399b709290438fecddb47e4339d8047ce07cdbdff66295e50f2ec2ed020327a2a9a459d01cffb1c6b5c4c20fc8d48308e4f6a427f79329048d94156dc6bbb27b3665ee209157db11fb986975f85a9e22655f4f9d4d94a3024cd1bd70f16da36d93ca7521104edfc7d038acf2371d9e1bbd6367affba929d4584d9c4bcc2ad50d279326cdc0911f70543e4eb57a3ead943e44806cbc4dafdcef6af45e80ee9c749429b50573f07f58435d433c5909c1b734644160db86e59b229bf282608f5903c4a9410c237091f1aefb83d6c83c5780498b77f15175cdcb9d21980d63f3730fa72e6864e00ae123893cf7f450afbc5db8e43cdae5efeecfa8dfadb8d2a6c7f191ee8900688dc090682371e6ba1fc158e270276809c1edad0232a5cc0492dbee8e77d4545843c761168338c91abf6f351542752cc4996ab0f5b160956d7dec6f47f8386501510e5090591e65945dd2d4994e86dd9b7bba364849bbed709a42f68e28ef1e9b86e8639169da5e0a4deccd9da615b0521c92c9531385d50c8df23dddcf86fe74bc18426092c850c7a6cf7b1458103d08ad8b0bc16d45adcf9c18808d09e2c6ac3d2eff03826fd17db532bac01f6d74244ec19224fc65d78dcd876ddac787695240bbddc8e09184242467934bf44ce5ee06db3fba86a79da6ce8046612faa8349402deec43c80a0ad150ca36ab5554ff99003af796d48959f342a05542d3b24d4bc3709ff14d0915ae9baf469ad336da960f4b9549a24bbdca3930e44829fae425c6289a2814830432e85b89f9fc70a7087ad56264f48c1b9c2e0cd3c0eab67d9d47080125f5d1092071f6cc893dd197b4faf1c3caaeca8406c3bc8651b7f4dae664634ca9d099d60d01ff24b6fa8dd39204794ea4a5add074452bb125281cbb299efae26bf9ae5f091d7c1d7ae3d4220159d835eac1b919480df6da2a9f3527f485c2bba6b55b9d4928171ba10f1fdbc2a1ec4b525e25f0cd493eca84c2d6566ae1fd73c2566be473092aaed28e0c1bce50ef7d026eb6ed2da08f7c80fd759a07d3d3ef276fe0153a0711017e16cdf773ec997ed9d8f5480d1f240192dc67164e4e71ac5b026f4a3cf008037d567db28782df33142d584e8b19164d4f0775d50263042a70a70d0cdd184b1460e75eb90aba05652c1f14d25e7b7d5c90a66819b5a8c79dcfbdad5b041dad0620c7efefe4c71208c742955250923544cf6eeaf22a78a92c413e35072576fd7f25af7856bd2584ea92508c8b885616cdee40f02c7335d8e16067f40e7f16a99c0425d4bb4c05d0e6f9a8af66df22d0b8e3cf38717c1b59137e0c9d7f911ad4046705080000000000000000000000000000000000000000000000000143000000000000000100000000000000000000000000000000000000000000000000000000000000000cebb333477db78ebb52bb709800a7809be35e14389a7ec346d662c040c726a14a48573a9e2ab3960c69d5bb13c5fc3f7849d8be8f7a3a5eac0e7fe1dfc7e9222074d890456f7b46ad0186f4636992e61a31fd25118015b5a827b275ee6f84ca205f5e99139a17c56eadc3b1d01535224d003b7e5b0000000000000000000000005448495320495320534f4d45204d4147494320425954455320464f5220534d54206d317252586750327870444902041d3c5f8c36e5da873d45bfa1d2399a572ac77493ec089cbf88a37b9e944284220101000000000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000005448495320495320534f4d45204d4147494320425954455320464f5220534d54206d3172525867503278704449000000',
    to: '0x64cb3A0Dcf43Ae0EE35C1C15edDF5F46D48Fa570'
  }
}
error Command failed with exit code 1.
```